<!DOCTYPE html>
<html>

<head>
  <title>Registration Form 12</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
</head>

<style>
  body {
    background-image: linear-gradient(to top left, #003366, black);
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
  }

  .container {
    max-width: 400px;
    margin: 0 auto;
    padding: 20px;
    color: white;
  }

  h2 {
    text-align: center;
  }

  .form-group {
    margin-bottom: 10px;
  }

  label {
    display: block;
    margin-bottom: 5px;
  }

  input[type="text"],
  input[type="email"],
  input[type="password"] {
    width: 100%;
    padding: 10px;
    border: 1px solid #ccc;
    border-radius: 4px;
  }

  button {
    display: block;
    margin-top: 10px;
    padding: 10px 20px;
    background-color: #4CAF50;
    color: white;
    border: none;
    border-radius: 4px;
    cursor: pointer;
  }

  button:hover {
    background-color: #45a049;
  }

  .error-message {
    color: #ff0000;
    margin-top: 5px;
  }

  .register-link {
    margin-top: 10px;
    color: rgb(0, 255, 89);
    text-decoration: underline;
    cursor: pointer;
  }
  #forgotPasswordBtn{
    color: rgb(255, 0, 0);
  }
</style>

<body>
  <div class="container">
    <h2>Login</h2>
    <form id="loginForm">
      <div class="form-group">
        <label for="loginEmail">Email:</label>
        <input type="email" id="loginEmail" class="form-control" required placeholder="Enter your email">
        <div class="error-message" id="loginEmailError"></div>
      </div>
      <div class="form-group">
        <label for="loginPassword">Password:</label>
        <input type="password" id="loginPassword" class="form-control" required placeholder="Enter your password">
        <div class="error-message" id="loginPasswordError"></div>
        <a href="#" id="forgotPasswordBtn" class="btn btn-link">Forgot Password?</a>
      </div>
      
      <button type="submit" class="btn btn-primary">Login</button>
      <div class="register-link" onclick="redirectToRegister()">Don't have an account? Register</div>
      
    </form>
  </div>

  <!-- Rest of the code -->
</body>


<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

<script>
  // Your web app's Firebase configuration
  // For Firebase JS SDK v7.20.0 and later, measurementId is optional
  const firebaseConfig = {
    apiKey: "AIzaSyClknweVKXCUP-dpumF8ySrvQu6TBYGHcs",
  authDomain: "moviehallhub-5be63.firebaseapp.com",
  databaseURL: "https://moviehallhub-5be63-default-rtdb.firebaseio.com",
  projectId: "moviehallhub-5be63",
  storageBucket: "moviehallhub-5be63.appspot.com",
  messagingSenderId: "42968964428",
  appId: "1:42968964428:web:b30d3825f1a50fd6dbc3e9",
  measurementId: "G-MGCRF3N36T"
  };

  // Initialize Firebase
  firebase.initializeApp(firebaseConfig);

  // Reference to the registration form
  var loginForm = document.getElementById('loginForm');

  // Submit event listener for the login form
  loginForm.addEventListener('submit', function (e) {
    e.preventDefault(); // Prevent form submission

    // Reset error messages
    document.getElementById('loginEmailError').innerHTML = "";
    document.getElementById('loginPasswordError').innerHTML = "";

    // Get user input values
    var loginEmail = document.getElementById('loginEmail').value;
    var loginPassword = document.getElementById('loginPassword').value;

    // Sign in with email and password
    firebase.auth().signInWithEmailAndPassword(loginEmail, loginPassword)
      .then(function (userCredential) {
        // Redirect to the logged-in page
        window.location.href = 'index.php';
      })
      .catch(function (error) {
        // Handle authentication error
        console.error('Error signing in:', error);

        // Display error message
        if (error.code === 'auth/wrong-password' || error.code === 'auth/user-not-found') {
          document.getElementById('loginPasswordError').innerHTML = "Invalid email or password.";
        } else {
          document.getElementById('loginEmailError').innerHTML = error.message;
        }
      });
  });

  // Forgot password button click event listener
  var forgotPasswordBtn = document.getElementById('forgotPasswordBtn');
  forgotPasswordBtn.addEventListener('click', function () {
    var loginEmail = document.getElementById('loginEmail').value;

    // Send password reset email
    firebase.auth().sendPasswordResetEmail(loginEmail)
      .then(function () {
        alert("Password reset email has been sent to your email address.");
      })
      .catch(function (error) {
        console.error('Error sending password reset email:', error);
        alert("Please enter a valid registered email.");
      });
  });

  // Function to redirect to the registration page
  function redirectToRegister() {
    window.location.href = 'registration.html';
  }
</script>

</html>
